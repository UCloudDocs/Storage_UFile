# 跨区域复制

US3 提供跨区域复制功能，您可以选择两个不同地域的存储空间（Bucket）进行绑定，进行文件的同步。

跨区域复制是跨不同 US3 数据中心（地域）的存储空间自动、异步复制文件，它会将文件的创建、更新和删除等操作从源存储空间复制到不同区域的目标存储空间。

跨区域复制功能提供了存储空间跨地域容灾能力，同时能够满足您数据复制的需求。目标存储空间的文件是源存储空间中文件的完整副本，它们具有相同的文件名、内容。

## 使用场景

* 合规性要求：您的数据在合规性上必须要求数据跨一定距离保存一份副本。通过跨区域复制功能，可以在远距离的 US3 数据中心之间复制数据以满足这些合规性要求。

* 最大限度减少延迟：您同时在两个地理位置存在业务需求，为了降低访问文件时的延迟，可以在地理位置与用户较近的 US3 数据中心中维护文件副本。

* 数据备份与容灾：您对数据的安全性和可用性有极高的要求，以备 US3 数据中心因特大灾难，如地震、海啸等不可抗力导致损毁时，还能启用另一个 US3 数据中心的备份数据。

* 数据复制：由于业务原因，需要将您的数据从 US3 的一个数据中心迁移到另一个数据中心。

* 操作原因：您同时在两个不同数据中心具有计算资源，您可能通过跨区域复制实现在这些区域的数据中心上同时维护 US3 的文件。

## 注意事项

1. 对于处于同步状态的两个存储空间，由于您可以同时操作这两个存储空间，因此从存储空间复制过去的文件可能会覆盖目标存储空间中的同名文件，覆盖文件的操作是不可逆的，请根据您的需求合理设置跨区域复制规则，避免重要数据丢失。

2. 由于跨区域复制采用异步复制，数据复制到目标 Bucket 需要一定的时间，通常几分钟到几小时不等，取决于数据的大小。

3. 镜像回源与跨区域复制两个功能不能同时开启。

4. 如存储桶配置了生命周期规则，则生命周期配置仅对当前存储空间生效，开启跨区域复制的存储空间之间不会同步删除文件。

5. 跨区域复制相关费用：

- 流量费用：使用跨区域复制功能将源存储空间的数据同步复制到目标存储空间时所产生的源端的外网流出费用。流量费用，请参见[产品价格](https://docs.ucloud.cn/ufile/bill/billing)。
- 请求费用：US3会计算请求次数并收取请求费用，包含源端的拉列表和下载请求以及目标端的上传请求。请求费用，请参见[产品价格](https://docs.ucloud.cn/ufile/bill/billing)。

## 设置跨区域复制规则

选中对应空间，进入管理界面，选择跨区域复制功能。

![](/images/跨区域复制1.png)

点击添加规则按钮，弹出添加跨区域复制规则界面。

![](/images/跨区域复制2.png)

1. 目标地域：用户可选择复制目标的存储空间所在地域。数据同步的两个存储空间必须分属两个地域，同地域的存储空间之间不能进行数据同步。

2. 目标存储空间：选择开启数据同步的目标存储空间。跨区域复制的两个存储空间都不能同时与其他任何存储空间存在互相同步的关系。例如已设置存储空间 A 的数据同步至存储空间 B，则 A 和 B 都不能和其他任何存储空间再建立数据同步关系。

跨区域复制规则添加完成后默认生效，生效状态具体可见状态栏，您可以通过操作栏下的其他按钮，进行相应的启用、禁用以及删除操作。

## 备注

1. 跨区域复制功能支持数据实时同步，对于数据的增加、删除、修改能够实时监控同步到目标地域的存储空间。对于 2MB 文件，能够做到分钟级别信息同步，保证两边数据的最终一致，不保证中间状态的数据一致。

2. 当前国内地域(华北一、华北二、广州、上海), 国外地域(曼谷、雅加达、莫斯科、华盛顿、洛杉矶、新加坡、法兰克福、东京、伦敦)支持跨区域复制功能，其他地域后续支持。

3. 跨区域复制功能目前不支持国内和国外地域之间的复制。
